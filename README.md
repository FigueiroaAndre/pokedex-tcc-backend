# Pokedex TCC Backend

The [PokéAPI](https://https://pokeapi.co/) has an endpoint that returns a list of pokemons, but it only returns the name of the
pokemon and a URL to the endpoint where the data of the pokemon is. So, in order to fetch data of N Pokemons, the frontend would
have to perform N+1 requests (1 request for the list of urls, and then the requests for each pokemon).

This project has been created to avoid perform request directly to the PokéAPI whenever fetch a pokemon is required in the
frontend project. The `server.js` has only one endpoint, which returns a list of pokemons with the specific data needed by the
frontend application.

## SETUP

### Fetching the data from the PokéAPI

The data have to be fetched from the PokéAPI in order to be able to serve it to other applications.
You can configure the field `loadData` in `config.json` file to customize the request. It has 2 parameters:
- `amount`: The amount of pokemons to be loaded from PokéAPI, if value is too high it will be limited by the numbers of available
pokemons
- `filename`: The name of the file where the data will be stored in the `data` folder

After save the changes you can run `npm run load-data` to perform the requests.

### Map the data

The PokéAPI retrieves a lot of data for each pokemon, a lot more than the frontend actually needs. We can map the list with all
possible data obtained in the last step to a lighter-list with just the data we need. In the `map` field of `config.json` file you
can configure the input and output files:
- `inputFilename`: The name of the file with the list of full pokemon data (it has to be inside the `data` folder)
- `outputFilename`: The name of the file that will contain the list if only the needed data (it will be generated inside the
`data` folder)

After save the changes you can run `npm run map-data` to map the input file into the output file

Each pokemon will contain only the following data: `id`, `name`, `sprites` and `types`


## About the server
The server code is totally contained in the `server.js` file, it has only one endpoint that returns the data stored in the file
configured in `server` field of `config.json`. The configuration has only one parameter:
- `dataFilename`: The name of the file that server will use to return the data. Use the last file generated by the **Setup** steps.

The endpoint accepts two query parameters:
- `page`: To paginate the request, initial page is 0 (defaults to 0). Each page might have up to 20 pokemons
- `searchText`: To filter the request by the name of pokemon (defaults to '')

### Running the server
To keep things simple you don't have to build the server, just run `npm run start` to start the server in the port `3000`.

## Pokemon information

To display the information of a single pokemon in the console, you can run `npm run get-info` passing the name of the pokemon as 
argument. This command will use the file configured in the `map.inputFileName` field of `config.json` as database to look for the
pokemon information.

e.g: `npm run get-info -- pikachu`